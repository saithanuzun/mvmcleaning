@model mvmclean.backend.Application.Features.Services.Commands.AddServicePostcodePricingRequest

@{
    ViewData["Title"] = "Add Service Pricing";
}

<div class="container-fluid mt-4">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2 class="mb-4">
                <i class="bi bi-plus-circle"></i> Add Service Pricing Rule
            </h2>
            <a asp-area="Admin" asp-controller="Service" asp-action="ServicePricingsDetails"
                asp-route-serviceId="@Model.ServiceId" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Back to Pricing
            </a>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-7">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-form-check"></i> Pricing Configuration
                    </h5>
                </div>

                <div class="card-body">
                    <form asp-area="Admin" asp-controller="Service" asp-action="CreateServicePricing" method="post">
                        @Html.AntiForgeryToken()

                        <!-- ServiceId (hidden) -->
                        <input type="hidden" asp-for="ServiceId" />

                        <!-- Postcode Area -->
                        <div class="mb-3">
                            <label asp-for="Postcode" class="form-label fw-semibold">
                                <i class="bi bi-geo-alt"></i> Postcode Area *
                            </label>
                            <input asp-for="Postcode" class="form-control" placeholder="e.g., LE1, LE2, LE3"
                                maxlength="4" required />
                            <small class="text-muted">Enter the postcode area (e.g., LE1)</small>
                            <span asp-validation-for="Postcode" class="text-danger small"></span>
                        </div>

                        <hr />

                        <!-- Multiplier -->
                        <div class="mb-3">
                            <label asp-for="Multiplier" class="form-label fw-semibold">
                                <i class="bi bi-percent"></i> Price Multiplier *
                            </label>
                            <input asp-for="Multiplier" type="number" step="0.01" min="0" class="form-control"
                                placeholder="1.00" required />
                            <small class="text-muted">
                                1.0 = Same price | 1.5 = 50% increase | 0.8 = 20% discount
                            </small>
                            <span asp-validation-for="Multiplier" class="text-danger small"></span>
                        </div>

                        <!-- Fixed Adjustment -->
                        <div class="mb-4">
                            <label asp-for="FixedAdjustment" class="form-label fw-semibold">
                                <i class="bi bi-currency-pound"></i> Fixed Adjustment
                            </label>
                            <div class="input-group">
                                <span class="input-group-text">£</span>
                                <input asp-for="FixedAdjustment" type="number" step="0.01" min="0" class="form-control"
                                    placeholder="0.00" />
                            </div>
                            <small class="text-muted">Additional fixed amount added to the price</small>
                            <span asp-validation-for="FixedAdjustment" class="text-danger small"></span>
                        </div>

                        <div class="alert alert-info">
                            <h6 class="alert-heading">
                                <i class="bi bi-lightbulb"></i> How Pricing Works
                            </h6>
                            <p class="mb-0 small">
                                <strong>Final Price = (Base Price × Multiplier) + Fixed Adjustment</strong>
                            </p>
                            <p class="mb-0 small">
                                <em>Example: Base £50 × 1.2 multiplier + £5 fixed = £65</em>
                            </p>
                        </div>

                        <hr />

                        <!-- Actions -->
                        <div class="d-flex justify-content-end gap-2">
                            <a asp-area="Admin" asp-controller="Service" asp-action="ServicePricingsDetails"
                                asp-route-serviceId="@Model.ServiceId" class="btn btn-secondary">
                                <i class="bi bi-x"></i> Cancel
                            </a>

                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-circle"></i> Add Pricing Rule
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-lg-5">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0">
                        <i class="bi bi-info-circle"></i> Pricing Examples
                    </h6>
                </div>
                <div class="card-body small">
                    <div class="mb-3">
                        <strong>Standard Rate</strong>
                        <p class="text-muted mb-0">Multiplier: 1.0, Fixed: £0</p>
                    </div>
                    <div class="mb-3">
                        <strong>Premium Area (+20%)</strong>
                        <p class="text-muted mb-0">Multiplier: 1.2, Fixed: £0</p>
                    </div>
                    <div class="mb-3">
                        <strong>Remote Area (+£15)</strong>
                        <p class="text-muted mb-0">Multiplier: 1.0, Fixed: £15</p>
                    </div>
                    <div class="mb-0">
                        <strong>Combined (+30% + £5)</strong>
                        <p class="text-muted mb-0">Multiplier: 1.3, Fixed: £5</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
