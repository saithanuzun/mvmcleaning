@model List<mvmclean.backend.Application.Features.Services.GetServicePostcodePricingsResponse>

@{
    ViewData["Title"] = "Service Postcode Pricings";
}

<div class="container mt-4">
    <div class="row mb-3 align-items-center">
        <div class="col">
            <h4 class="fw-bold">Service Postcode Pricings</h4>
            <p class="text-muted mb-0">View pricing rules by postcode area</p>
        </div>

        <div class="col text-end">
            <a asp-area="Admin"
               asp-controller="Service"
               asp-action="CreateServicePricing"
               asp-route-serviceId="@(Model?.FirstOrDefault()?.ServiceId)"
               class="btn btn-primary">
                + Add Pricing
            </a>
        </div>
    </div>

    <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Postcode Area</th>
                        <th>Multiplier</th>
                        <th>Fixed Adjustment</th>
                        <th class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var pricing in Model)
                        {
                            <tr>
                                <td>@pricing.PostcodeArea</td>
                                <td>@pricing.Multiplier</td>
                                <td>Â£@pricing.FixedAdjustment.ToString("0.00")</td>
                                <td class="text-center">
                                    <a asp-area="Admin"
                                       asp-controller="Service"
                                       asp-action="EditServicePricing"
                                       asp-route-serviceId="@pricing.ServiceId"
                                       asp-route-postcode="@pricing.PostcodeArea"
                                       class="btn btn-sm btn-outline-primary">
                                        Edit
                                    </a>

                                    <a asp-area="Admin"
                                       asp-controller="Service"
                                       asp-action="DeleteServicePricing"
                                       asp-route-serviceId="@pricing.ServiceId"
                                       asp-route-postcode="@pricing.PostcodeArea"
                                       class="btn btn-sm btn-outline-danger">
                                        Delete
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="4" class="text-center text-muted py-4">
                                No postcode pricing found.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-3">
        <a asp-area="Admin"
           asp-controller="Service"
           asp-action="ServiceDetails"
           asp-route-serviceId="@(Model?.FirstOrDefault()?.ServiceId)"
           class="btn btn-secondary">
            Back to Service
        </a>
    </div>
</div>
